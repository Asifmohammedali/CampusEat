<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Orders ‚Äî CampusEats</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root { --bg:#faf8f4; --bg2:#f3f0ea; --card:#fff; --border:#e8e3d9; --accent:#d4521a; --accent2:#f5a623; --text:#1a1815; --muted:#8a847a; --muted2:#c5bfb4; --dark:#1a1815; --success:#4caf7d; --error:#ff5c5c; }
    body { background: var(--bg); color: var(--text); font-family: 'Plus Jakarta Sans', sans-serif; min-height: 100vh; }
    header { position: sticky; top: 0; z-index: 100; background: rgba(250,248,244,0.9); backdrop-filter: blur(16px); border-bottom: 1px solid var(--border); padding: 0 2rem; height: 64px; display: flex; align-items: center; justify-content: space-between; }
    .logo { display: flex; align-items: center; gap: 10px; text-decoration: none; }
    .logo-mark { width: 36px; height: 36px; background: linear-gradient(135deg, var(--accent2), var(--accent)); border-radius: 10px; display: grid; place-items: center; font-size: 1.1rem; }
    .logo-text { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 1.15rem; color: var(--text); letter-spacing: -0.02em; }
    .logo-text span { color: var(--accent); }
    .header-nav { display: flex; align-items: center; gap: 0.25rem; }
    .nav-link { padding: 0.45rem 0.9rem; border-radius: 8px; text-decoration: none; color: var(--muted); font-size: 0.83rem; font-weight: 500; transition: background 0.15s, color 0.15s; }
    .nav-link:hover { background: var(--bg2); color: var(--text); }
    .nav-link.active { background: rgba(212,82,26,0.08); color: var(--accent); font-weight: 600; }
    .header-right { display: flex; align-items: center; gap: 0.7rem; }
    .user-chip { display: flex; align-items: center; gap: 8px; background: var(--bg2); border: 1px solid var(--border); border-radius: 30px; padding: 0.28rem 0.9rem 0.28rem 0.28rem; }
    .user-avatar { width: 28px; height: 28px; background: linear-gradient(135deg, var(--accent2), var(--accent)); border-radius: 50%; display: grid; place-items: center; font-size: 0.7rem; font-weight: 700; color: #fff; font-family: 'Syne', sans-serif; }
    .user-name { font-size: 0.82rem; font-weight: 600; }
    .cart-btn { position: relative; width: 38px; height: 38px; border-radius: 10px; background: var(--dark); border: none; color: #fff; font-size: 1rem; display: grid; place-items: center; cursor: pointer; text-decoration: none; }
    .cart-count { position: absolute; top: -4px; right: -4px; width: 17px; height: 17px; background: var(--accent); border-radius: 50%; font-size: 0.6rem; font-weight: 700; display: grid; place-items: center; color: #fff; }
    .btn-logout { padding: 0.42rem 0.9rem; border-radius: 8px; border: 1px solid var(--border); background: transparent; color: var(--muted); font-family: 'Plus Jakarta Sans', sans-serif; font-size: 0.82rem; cursor: pointer; text-decoration: none; }
    .btn-logout:hover { border-color: var(--accent); color: var(--accent); }

    .content { max-width: 800px; margin: 0 auto; padding: 2rem 1.5rem; }
    .page-title { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 1.5rem; letter-spacing: -0.03em; margin-bottom: 1.5rem; }
    .page-title span { color: var(--accent); }

    .order-card { background: var(--card); border: 1px solid var(--border); border-radius: 16px; margin-bottom: 1rem; overflow: hidden; animation: cardIn 0.4s ease both; }
    @keyframes cardIn { from { opacity:0; transform:translateY(8px); } to { opacity:1; transform:translateY(0); } }
    .order-header { display: flex; align-items: center; justify-content: space-between; padding: 1rem 1.3rem; border-bottom: 1px solid var(--border); flex-wrap: wrap; gap: 0.6rem; }
    .order-id { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 0.95rem; }
    .order-date { font-size: 0.75rem; color: var(--muted); }
    .status-pill { font-size: 0.68rem; font-weight: 700; border-radius: 20px; padding: 3px 10px; text-transform: uppercase; letter-spacing: 0.06em; }
    .status-pill.PENDING   { background: rgba(245,166,35,0.1);  color: var(--accent2); border: 1px solid rgba(245,166,35,0.3); }
    .status-pill.CONFIRMED { background: rgba(76,175,125,0.1);  color: var(--success); border: 1px solid rgba(76,175,125,0.3); }
    .status-pill.PREPARING { background: rgba(212,82,26,0.08);  color: var(--accent);  border: 1px solid rgba(212,82,26,0.2); }
    .status-pill.READY     { background: rgba(76,175,125,0.15); color: var(--success); border: 1px solid rgba(76,175,125,0.4); }
    .status-pill.COMPLETED { background: rgba(26,24,21,0.06);   color: var(--muted);   border: 1px solid var(--border); }
    .status-pill.CANCELLED { background: rgba(255,92,92,0.08);  color: var(--error);   border: 1px solid rgba(255,92,92,0.2); }
    .status-pill.REJECTED  { background:rgba(255,92,92,0.1);   color:#ff5c5c; border:1px solid rgba(255,92,92,0.3); }

    .order-items { padding: 0.8rem 1.3rem; }
    .order-item-row { display: flex; justify-content: space-between; font-size: 0.83rem; padding: 0.3rem 0; color: var(--muted); }
    .order-item-row span:last-child { font-weight: 600; color: var(--text); }
    .order-footer { display: flex; justify-content: space-between; align-items: center; padding: 0.8rem 1.3rem; border-top: 1px solid var(--border); background: var(--bg2); }
    .order-total { font-family: 'Syne', sans-serif; font-weight: 900; font-size: 1rem; }
    .order-total-label { font-size: 0.75rem; color: var(--muted); }

    .empty-state { text-align: center; padding: 4rem 1rem; color: var(--muted); }
    .empty-icon { font-size: 3rem; opacity: 0.2; margin-bottom: 0.8rem; }
    .btn-browse { display: inline-block; padding: 0.65rem 1.4rem; border-radius: 10px; background: var(--dark); color: #fff; text-decoration: none; font-family: 'Syne', sans-serif; font-weight: 700; font-size: 0.85rem; margin-top: 1rem; }
  </style>
</head>
<body>
<header>
  <a href="{% url 'student_dashboard' %}" class="logo">
    <div class="logo-mark">üçΩ</div>
    <div class="logo-text">Campus<span>Eats</span></div>
  </a>
  <nav class="header-nav">
    <a href="{% url 'student_dashboard' %}"     class="nav-link">Menu</a>
    <a href="{% url 'student_order_status' %}"  class="nav-link ">Order Status</a>
    <a href="{% url 'order_history_student' %}" class="nav-link active">Orders</a>
    <a href="{% url 'student_wallet' %}"        class="nav-link">Wallet</a>
  </nav>
  <div class="header-right">
    <div class="user-chip">
      <div class="user-avatar">{{ user.name|first|upper }}</div>
      <span class="user-name">{{ user.name }}</span>
    </div>
    <a href="{% url 'view_cart' %}" class="cart-btn">
      üõí
      {% if cart_count > 0 %}<span class="cart-count">{{ cart_count }}</span>{% endif %}
    </a>
    <a href="{% url 'logout' %}" class="btn-logout">Logout</a>
  </div>
</header>

<div class="content">
  <div class="page-title">My <span>Orders</span></div>

  {% if orders %}
    {% for order in orders %}
      <div class="order-card" style="animation-delay:{{ forloop.counter0 }}00ms;">
        <div class="order-header">
          <div>
            <div class="order-id">Order #{{ order.id }}</div>
            <div class="order-date">{{ order.ordered_at|date:"d M Y, h:i A" }}</div>
          </div>
          <span class="status-pill {{ order.status }}">{{ order.get_status_display }}</span>
        </div>
        <div class="order-items">
          {% for ci in order.cart_items.all %}
            <div class="order-item-row">
              <span>{{ ci.item.name }} √ó {{ ci.quantity }}</span>
              <span>‚Çπ{{ ci.subtotal }}</span>
            </div>
          {% endfor %}
        </div>
        <div class="order-footer">
          <div class="order-total-label">Total Paid</div>
          <div class="order-total">‚Çπ{{ order.total_amount|floatformat:2 }}</div>
        </div>
      </div>
    {% endfor %}
  {% else %}
    <div class="empty-state">
      <div class="empty-icon">üìã</div>
      <div>No orders yet.</div>
      <a href="{% url 'student_dashboard' %}" class="btn-browse">Browse Menu</a>
    </div>
  {% endif %}
</div>
</body>
</html>