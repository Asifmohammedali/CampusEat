<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>My Wallet ‚Äî CampusEats</title>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    :root { --bg:#faf8f4; --bg2:#f3f0ea; --card:#fff; --border:#e8e3d9; --accent:#d4521a; --accent2:#f5a623; --text:#1a1815; --muted:#8a847a; --muted2:#c5bfb4; --dark:#1a1815; --success:#4caf7d; --error:#ff5c5c; }
    body { background: var(--bg); color: var(--text); font-family: 'Plus Jakarta Sans', sans-serif; min-height: 100vh; }
    header { position: sticky; top: 0; z-index: 100; background: rgba(250,248,244,0.9); backdrop-filter: blur(16px); border-bottom: 1px solid var(--border); padding: 0 2rem; height: 64px; display: flex; align-items: center; justify-content: space-between; }
    .logo { display: flex; align-items: center; gap: 10px; text-decoration: none; }
    .logo-mark { width: 36px; height: 36px; background: linear-gradient(135deg, var(--accent2), var(--accent)); border-radius: 10px; display: grid; place-items: center; font-size: 1.1rem; }
    .logo-text { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 1.15rem; color: var(--text); letter-spacing: -0.02em; }
    .logo-text span { color: var(--accent); }
    .header-nav { display: flex; align-items: center; gap: 0.25rem; }
    .nav-link { padding: 0.45rem 0.9rem; border-radius: 8px; text-decoration: none; color: var(--muted); font-size: 0.83rem; font-weight: 500; transition: background 0.15s, color 0.15s; }
    .nav-link:hover { background: var(--bg2); color: var(--text); }
    .nav-link.active { background: rgba(212,82,26,0.08); color: var(--accent); font-weight: 600; }
    .header-right { display: flex; align-items: center; gap: 0.7rem; }
    .user-chip { display: flex; align-items: center; gap: 8px; background: var(--bg2); border: 1px solid var(--border); border-radius: 30px; padding: 0.28rem 0.9rem 0.28rem 0.28rem; }
    .user-avatar { width: 28px; height: 28px; background: linear-gradient(135deg, var(--accent2), var(--accent)); border-radius: 50%; display: grid; place-items: center; font-size: 0.7rem; font-weight: 700; color: #fff; font-family: 'Syne', sans-serif; }
    .user-name { font-size: 0.82rem; font-weight: 600; }
    .cart-btn { position: relative; width: 38px; height: 38px; border-radius: 10px; background: var(--dark); border: none; color: #fff; font-size: 1rem; display: grid; place-items: center; cursor: pointer; text-decoration: none; }
    .cart-count { position: absolute; top: -4px; right: -4px; width: 17px; height: 17px; background: var(--accent); border-radius: 50%; font-size: 0.6rem; font-weight: 700; display: grid; place-items: center; color: #fff; }
    .btn-logout { padding: 0.42rem 0.9rem; border-radius: 8px; border: 1px solid var(--border); background: transparent; color: var(--muted); font-family: 'Plus Jakarta Sans', sans-serif; font-size: 0.82rem; cursor: pointer; text-decoration: none; }
    .btn-logout:hover { border-color: var(--accent); color: var(--accent); }

    .content { max-width: 700px; margin: 0 auto; padding: 2rem 1.5rem; }
    .page-title { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 1.5rem; letter-spacing: -0.03em; margin-bottom: 1.5rem; }
    .page-title span { color: var(--accent); }

    /* Balance card */
    .balance-card { background: var(--dark); color: #fff; border-radius: 18px; padding: 1.8rem; margin-bottom: 1.5rem; display: flex; align-items: center; justify-content: space-between; }
    .balance-label { font-size: 0.8rem; color: rgba(255,255,255,0.5); text-transform: uppercase; letter-spacing: 0.08em; margin-bottom: 0.4rem; }
    .balance-amount { font-family: 'Syne', sans-serif; font-weight: 900; font-size: 2.2rem; letter-spacing: -0.03em; }
    .balance-icon { font-size: 2.5rem; opacity: 0.3; }

    /* Transaction list */
    .txn-list { display: flex; flex-direction: column; gap: 8px; }
    .txn-row { display: flex; align-items: center; gap: 12px; background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 0.9rem 1.1rem; animation: rowIn 0.3s ease both; }
    @keyframes rowIn { from { opacity:0; transform:translateY(4px); } to { opacity:1; transform:translateY(0); } }
    .txn-icon { width: 36px; height: 36px; border-radius: 10px; display: grid; place-items: center; font-size: 0.95rem; flex-shrink: 0; }
    .txn-icon.credit { background: rgba(76,175,125,0.1); }
    .txn-icon.debit  { background: rgba(212,82,26,0.08); }
    .txn-info { flex: 1; }
    .txn-type { font-weight: 600; font-size: 0.875rem; }
    .txn-type.credit { color: var(--success); }
    .txn-type.debit  { color: var(--accent); }
    .txn-meta { font-size: 0.7rem; color: var(--muted); margin-top: 2px; }
    .txn-right { text-align: right; flex-shrink: 0; }
    .txn-amount { font-family: 'Syne', sans-serif; font-weight: 800; font-size: 0.95rem; }
    .txn-amount.credit { color: var(--success); }
    .txn-amount.debit  { color: var(--accent); }
    .txn-balance { font-size: 0.7rem; color: var(--muted); margin-top: 2px; }

    .empty-state { text-align: center; padding: 3rem 1rem; color: var(--muted); font-size: 0.85rem; }
    .section-label { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 0.88rem; margin-bottom: 0.8rem; color: var(--muted); text-transform: uppercase; letter-spacing: 0.06em; }
  </style>
</head>
<body>
<header>
  <a href="{% url 'student_dashboard' %}" class="logo">
    <div class="logo-mark">üçΩ</div>
    <div class="logo-text">Campus<span>Eats</span></div>
  </a>
  <nav class="header-nav">
    <a href="{% url 'student_dashboard' %}"     class="nav-link">Menu</a>
    <a href="{% url 'student_order_status' %}"  class="nav-link ">Order Status</a>
    <a href="{% url 'order_history_student' %}" class="nav-link">Orders</a>
    <a href="{% url 'student_wallet' %}"        class="nav-link active">Wallet</a>
  </nav>
  <div class="header-right">
    <div class="user-chip">
      <div class="user-avatar">{{ user.name|first|upper }}</div>
      <span class="user-name">{{ user.name }}</span>
    </div>
    <a href="{% url 'view_cart' %}" class="cart-btn">
      üõí
      {% if cart_count > 0 %}<span class="cart-count">{{ cart_count }}</span>{% endif %}
    </a>
    <a href="{% url 'logout' %}" class="btn-logout">Logout</a>
  </div>
</header>

<div class="content">
  <div class="page-title">My <span>Wallet</span></div>

  <!-- Balance card -->
  <div class="balance-card">
    <div>
      <div class="balance-label">Current Balance</div>
      <div class="balance-amount">‚Çπ{{ balance|floatformat:2 }}</div>
    </div>
    <div class="balance-icon">üí∞</div>
  </div>

  <!-- Transactions -->
<div class="section-label">Transaction History</div>

  {% if transactions %}
    <div class="txn-list">
      {% for txn in transactions %}
        <div class="txn-row">

          <!-- ICON -->
          <div class="txn-icon {% if txn.transaction_type == 'CREDIT' or txn.transaction_type == 'RETURN' %}credit{% else %}debit{% endif %}">
            {% if txn.transaction_type == 'CREDIT' or txn.transaction_type == 'RETURN' %}
              ‚Üì
            {% else %}
              ‚Üë
            {% endif %}
          </div>

          <!-- INFO -->
          <div class="txn-info">
            <div class="txn-type {% if txn.transaction_type == 'CREDIT' or txn.transaction_type == 'RETURN' %}credit{% else %}debit{% endif %}">
              {{ txn.transaction_type|capfirst }}
              {% if txn.order %} ‚Äî Order #{{ txn.order.id }}{% endif %}
            </div>
            <div class="txn-meta">
              {{ txn.date|date:"d M Y" }} ¬∑ {{ txn.time|time:"h:i A" }}
            </div>
          </div>

          <!-- AMOUNT -->
          <div class="txn-right">
            <div class="txn-amount {% if txn.transaction_type == 'CREDIT' or txn.transaction_type == 'RETURN' %}credit{% else %}debit{% endif %}">
              {% if txn.transaction_type == 'CREDIT' or txn.transaction_type == 'RETURN' %}
                +‚Çπ{{ txn.amount|floatformat:2 }}
              {% else %}
                ‚àí‚Çπ{{ txn.amount|floatformat:2 }}
              {% endif %}
            </div>
            <div class="txn-balance">
              Bal: ‚Çπ{{ txn.balance|floatformat:2 }}
            </div>
          </div>

        </div>
      {% endfor %}
    </div>
  {% else %}
    <div class="empty-state">No transactions yet.</div>
  {% endif %}
</div>
</body>
</html>